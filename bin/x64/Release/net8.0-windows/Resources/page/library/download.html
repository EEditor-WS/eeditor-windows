<!DOCTYPE html>
<html lang="ru">
    <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-T7C5DLXM');</script>
    <!-- End Google Tag Manager -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>EEditor WS | Library</title>
        <!--link rel="icon" type="image/x-icon" href="../../img/ico/ico.svg"-->
        <link rel="icon" type="image/x-icon" href="../../img/library/icon.svg">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap">
        <link rel="stylesheet" href="../../css/!.css">
        <link rel="stylesheet" href="../../css/base.css">
        <link rel="stylesheet" href="../../css/library.css">
        <link rel="stylesheet" href="../../css/head.css">
        <link rel="stylesheet" href="../../css/list.css">
        <link rel="stylesheet" href="../../css/style.css">
        <link rel="stylesheet" href="../../css/head.css">
        <link rel="stylesheet" href="download.css">
        <link rel="stylesheet" href="modern/general.css">
        <link rel="stylesheet" href="modern/main.css">
        <link rel="stylesheet" href="modern/mobile.css">
        <!--script src="download.js"></script-->
        <script src="../../js/fetch.js"></script>
        <script src="authorlist.js"></script>
        <script src="scenariolist.js"></script>
        <script src="maplist.js"></script>
        <script src="modern/openPage.js"></script>
        <script src="modern/filters.js"></script>
        <script src="../../js/library.js"></script>
        <script src="../../js/language.js"></script>
        <script src="../../js/translator.js"></script>
        <script src="../../js/upload.js"></script>
        <script src="../../js/auth.js"></script>
        <script src="../../js/head.js"></script>
        <script src="downloadlist.js"></script>
        <script src="modern/cardgenerator.js"></script>
        <!--script src="../download/download.js"></script-->
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                applyUrlParams();
            });
        </script>
        <!-- Google tag (gtag.js) -->
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-9HFX1FVLMV"></script>
            <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-9HFX1FVLMV');
            </script>
        <!-- End Google tag (gtag.js) -->
    </head>
    <body class="dark dark-theme" data-lang="en">
        <!-- Google Tag Manager (noscript) -->
            <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T7C5DLXM"
            height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <!-- End Google Tag Manager (noscript) -->
        <nav class="nav-header">
            <div class="header-logo-container">
                <img class="header-logo" src="../../img/library/icon.svg" alt="EEditor Lib">
                <h class="header-title">EEditor Lib</h>
            </div>
            <br>
            <button href="../../index.html" id="back-to-reforms" class="action-button back" title="Return to editor" data-tooltip="Вернуться к редактору" onclick="window.location.href = '../../index.html'">
                <img src="../../img/ui/back.svg">
            </button>
            <button class="navbtn" data-page="main" data-translate="main">Главная</button>
            <button class="navbtn active" data-page="scenarios" data-translate="scenarios">Сценарии</button>
            <button class="navbtn" data-page="maps" data-translate="maps">Карты</button>
            <div class="nav-actions">
                <div class="nav-icons">
                    <button id="settings-button" class="icon-action-button settings" title="Настройки">
                        <img src="../../img/ui/settings.svg">
                    </button>
                    <div class="language-switcher">
                        <button id="currentLangChooser" class="icon-action-button lang" title="Language">
                            <span class="lang-icon">
                                <img src="../../img/ui/world.svg">
                            </span>
                        </button>
                        <div id="currentLang" class="void"></div>
                        <div id="langDropdown" class="lang-dropdown">
                            <a href="#" data-lang="en">
                                <img src="../../img/lang/en.svg" class="lang-flag" alt="English">
                                English
                            </a>
                            <a href="#" data-lang="ru">
                                <img src="../../img/lang/ru.svg" class="lang-flag" alt="Русский">
                                Русский
                            </a>
                            <a href="#" data-lang="uk">
                                <img src="../../img/lang/uk.svg" class="lang-flag" alt="Українська">
                                Українська
                            </a>
                            <a href="#" data-lang="mo">
                                <img src="../../img/lang/mo.svg" class="lang-flag" alt="Молдовеняскэ">
                                Молдовеняскэ
                            </a>
                            <a href="#" data-lang="be">
                                <img src="../../img/lang/be.svg" class="lang-flag" alt="Беларуская">
                                Беларуская (часткова)
                            </a>
                            <a href="#" data-lang="kk">
                                <img src="../../img/lang/kk.svg" class="lang-flag" alt="Қазақша">
                                Қазақша (ішінара)
                            </a>
                        </div>
                    </div>
                    <button id="account-button" class="icon-action-button account" title="Аккаунт">
                        <img class="account-button-avatar" src="" alt="" style="display: none; width: 24px; height: 24px; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                        <img src="../../img/ui/user.svg">
                    </button>
                    <div id="accountDropdown" class="account-dropdown">
                        <div class="account-info">
                            <img class="account-avatar" src="" alt="Avatar" style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px; display: none;">
                            <div>
                                <div class="account-name">Гость</div>
                                <div class="account-id">#0000</div>
                            </div>
                        </div>
                        <div class="account-divider"></div>
                        <a href="#" class="account-item" data-action="login">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 17L15 12L10 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M15 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span data-translate="login">Войти через Discord</span>
                        </a>
                        <a href="#" class="account-item" data-action="register">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M8.5 11C10.7091 11 12.5 9.20914 12.5 7C12.5 4.79086 10.7091 3 8.5 3C6.29086 3 4.5 4.79086 4.5 7C4.5 9.20914 6.29086 11 8.5 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M20 8V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M23 11H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span data-translate="register">Регистрация</span>
                        </a>
                        <div class="account-divider"></div>
                        <a href="#" class="account-item" data-action="settings">
                            <img src="../../img/ui/settings.svg">
                            <span data-translate="settings">Настройки</span>
                        </a>
                        <a href="#" class="account-item" data-action="logout">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M16 17L21 12L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span data-translate="logout">Выйти</span>
                        </a>
                    </div>
                </div>
            </nav>

        <div id="main" class="page list active">
            <div class="main-container">
                <!--div class="lib-header">
                    <h1 data-translate="main">Main</h1>
                    <div class="header-actions">
                        <div class="tooltip-container">
                            <button id="filters" class="icon-action-button filters" title="Filters" onclick="libShowFilters()">
                                <svg viewBox="0 0 24 24" width="14" height="14">
                                    <path d="M3 4h18l-7 8v8l-4-2v-6z" fill="none" stroke="currentColor" stroke-width="2"></path>
                                </svg>
                            </button>
                            <div class="tooltip tooltip-positioned">Migrate Groups</div>
                        </div>
                    </div-->
                </div-->
                <div class="lib-modern-down">
                    <div class="lib-modern-group">
                        <h1 >With Events</h1>
                        <div class="lib_modern_grouplist" id="libgroup_events"></div>
                    </div>
                    <div class="lib-modern-group">
                        <h1 >New</h1>
                        <div class="lib_modern_grouplist" id="libgroup_new"></div>
                    </div>
                    <div class="lib-modern-group">
                        <h1 >Detailed</h1>
                        <div class="lib_modern_grouplist" id="libgroup_detailed"></div>
                    </div>
                    <div class="lib-modern-group">
                        <h1 >Unusual</h1>
                        <div class="lib_modern_grouplist" id="libgroup_unusual"></div>
                    </div>
                    <div class="lib-modern-group">
                        <h1 >Alternative History</h1>
                        <div class="lib_modern_grouplist" id="libgroup_althist"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="scenarios" class="page list">
            <div class="download-container">
                <div class="lib-header">
                    <h1 data-translate="scenarios">Сценарии</h1>
                    <div class="header-actions">
                        <div class="tooltip-container">
                            <button id="filters" class="icon-action-button filters" title="Filters" onclick="libShowFilters()">
                                <svg viewBox="0 0 24 24" width="14" height="14">
                                    <path d="M3 4h18l-7 8v8l-4-2v-6z" fill="none" stroke="currentColor" stroke-width="2"></path>
                                </svg>
                            </button>
                            <div class="tooltip tooltip-positioned">Migrate Groups</div>
                        </div>
                    </div>
                </div>
                <div class="lib-down">
                    <div class="lib-filters" id="lib-filters">
                        <div class="lib-filters-header">
                            <h3>Фильтры</h3>
                            <button class="collapse-filters" onclick="libShowFilters()" style="width: 25px; font-size: 25px">×</button>
                        </div>
                        
                        <div class="lib-filters-content">
                            <!-- Search box -->
                            <div class="filter-group">
                                <input type="text" id="lib-search" class="lib-search" placeholder="Поиск..." oninput="libApplyFilters()">
                            </div>

                            <!-- New filter groups -->
                            <div class="filter-group">
                                <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                    <label>Основные параметры</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <div class="mainform">
                                        <input type="text" id="lib-full-id-filter" style="display: none">
                                        <div class="form-element">
                                            <label>Автор</label>
                                            <select id="lib-autor-filter" onchange="libApplyFilters()" title="Filter by author">
                                                <option value="">Все авторы</option>
                                                <option value="@eenot">ЕЕнот</option>
                                                <option value="@theman_the_myth_the_legend">HIM</option>
                                                <option value="@helvetic_brutalisation">Helvetic Brutalisation</option>
                                                <option value="@pelo3918">Pelo</option>
                                                <option value="@totoska">Totoska</option>
                                                <option value="@deleted_user">Estebanf259</option>
                                                <option value="@zachary.bachary">Zachary</option>
                                            </select>
                                        </div>
                                        <div class="form-element">
                                            <label>Карта</label>
                                            <select id="lib-map-filter" onchange="libApplyFilters()" title="Filter by map">
                                                <option value="">Все карты</option>
                                                <option value="eenot_world">World by ЕЕнот</option>
                                                <option value="jalhund_europe">Standart Europe</option>
                                                <option value="bluepum_enaatme">Europe+ by Bluepum</option>
                                                <option value="shahz0d_world">World Plus</option>
                                                <option value="zachary_eurasia">Eurasia by Zachary</option>
                                                <option value="zachary_world">World by Zachary</option>
                                                <option value="estebanf259_world-redux">World Map Redux</option>
                                                <option value="eenot_arstotzka">Arstotzka World Map</option>
                                                <option value="estebanf259_euromagnus">EuroMagnus by Estebanf259</option>
                                                <option value="parkourcat_euro4">Euro4 Standart</option>
                                                <option value="enotochel_pvp">PvP map by Енотий</option>
                                                <option value="zachary_usa">USA by Zachary</option>
                                                <option value="zachary_world-3ga">World Map (3 billion years ago)</option>
                                                <option value="zachary_world-am">World Map Accoding to Americans</option>
                                                <option value="eenot_moldavia">Moldavia</option>
                                                <option value="pelo_greece">Aegean Sea</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!--div class="filter-group">
                            <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                <label>Наполнение</label>
                                <button class="collapse-filter-group" type="button">▼</button>
                            </div>
                            <div class="filter-group-content collapsed">
                            
                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Экономика</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="economy" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="economy" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="economy" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="economy" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Население</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="population" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="population" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="population" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="population" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Ресурсы</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="resources" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="resources" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="resources" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="resources" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Дипломатия</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="diplomacy" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="diplomacy" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="diplomacy" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="diplomacy" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Восстания</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="rebellions" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="rebellions" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="rebellions" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="rebellions" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>Реформы</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="reforms" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="reforms" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="reforms" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="reforms" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label>События</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="none" name="events" onchange="libApplyFilters()"> Нету</label>
                                            <label><input type="checkbox" value="partially" name="events" onchange="libApplyFilters()"> Частично</label>
                                            <label><input type="checkbox" value="developing" name="events" onchange="libApplyFilters()"> В разработке</label>
                                            <label><input type="checkbox" value="yes" name="events" onchange="libApplyFilters()"> Есть</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div-->

                            <div class="filter-group">
                                <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                    <label>Статус</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <div class="checkbox-list">
                                        <label><input type="checkbox" value="completed" name="status" onchange="libApplyFilters()"> Завершён</label>
                                        <label><input type="checkbox" value="early_access" name="status" onchange="libApplyFilters()"> Ранний доступ</label>
                                        <label><input type="checkbox" value="in_development" name="status" onchange="libApplyFilters()"> В разработке</label>
                                        <label><input type="checkbox" value="beta" name="status" onchange="libApplyFilters()"> Бета</label>
                                        <label><input type="checkbox" value="alpha" name="status" onchange="libApplyFilters()"> Альфа</label>
                                        <label><input type="checkbox" value="experimental" name="status" onchange="libApplyFilters()"> Эксперементальный</label>
                                        <label><input type="checkbox" value="frozen" name="status" onchange="libApplyFilters()"> Заморожен</label>
                                        <label><input type="checkbox" value="archived" name="status" onchange="libApplyFilters()"> Архивный</label>
                                        <label><input type="checkbox" value="discontinued" name="status" onchange="libApplyFilters()"> Заброшен</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Type filter -->
                            <div class="filter-group">
                                <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                    <label>Тип сценария</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <select id="lib-type-filter" onchange="libApplyFilters()" title="Filter by type">
                                        <option value="">Все типы</option>
                                        <option value="sandbox">Песочница</option>
                                        <option value="historical">Исторический</option>
                                        <option value="lore">Сюжетный</option>
                                        <option value="battle">Одиночный бой</option>
                                        <option value="command-battle">Коммандный бой</option>
                                        <option value="generals">Генералы</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Time period filter -->
                            <div class="filter-group">
                                <div class="filter-group-header collapsed" onclick="libToggleFilterGroup(this)">
                                    <label>Эпоха</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <div class="checkbox-list">
                                        <label><input type="checkbox" value="ancient" onchange="libApplyFilters()"> Довоенный</label>
                                        <label><input type="checkbox" value="ww1" onchange="libApplyFilters()"> WWI</label>
                                        <label><input type="checkbox" value="interbellum" onchange="libApplyFilters()"> Интербеллум</label>
                                        <label><input type="checkbox" value="ww2" onchange="libApplyFilters()"> WW2</label>
                                        <label><input type="checkbox" value="cw" onchange="libApplyFilters()"> CW</label>
                                        <label><input type="checkbox" value="modern" onchange="libApplyFilters()"> Современность</label>
                                        <label><input type="checkbox" value="alternative" onchange="libApplyFilters()"> Альтернативный</label>
                                    </div>
                                </div>
                            </div>

                            <div class="filter-group">
                                <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                    <label>Язык</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <select id="lib-language-filter" class="main-page-input" onchange="libApplyFilters()" title="Filter by language">
                                        <option value="">Все</option>
                                        <option value="en">English</option>
                                        <option value="ru">Русский</option>
                                        <option value="uk">Українська</option>
                                        <option value="mo">Молдовеняскэ</option>
                                        <option value="be">Беларуская</option>
                                        <option value="kk">Қазақша</option>
                                        <option value="de">Deutsch</option>
                                        <option value="fr">Français</option>
                                        <option value="es">Español</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <!--div class="filter-group">
                                <div class="filter-group-header collapsed" onclick="libToggleFilterGroup(this)">
                                    <label>Количество Провинций</label>
                                    <button class="collapse-filter-group" type="button">▼</button>
                                </div>
                                <div class="filter-group-content collapsed">
                                    <div class="checkbox-list">
                                        <label><input type="checkbox" value="0" onchange="libApplyFilters()"> 100-</label>
                                        <label><input type="checkbox" value="100" onchange="libApplyFilters()"> 100+</label>
                                        <label><input type="checkbox" value="500" onchange="libApplyFilters()"> 500+</label>
                                        <label><input type="checkbox" value="750" onchange="libApplyFilters()"> 750+</label>
                                        <label><input type="checkbox" value="1000" onchange="libApplyFilters()"> 1000+</label>
                                        <label><input type="checkbox" value="1250" onchange="libApplyFilters()"> 1250+</label>
                                        <label><input type="checkbox" value="1500" onchange="libApplyFilters()"> 1500+</label>
                                        <label><input type="checkbox" value="2000" onchange="libApplyFilters()"> 2000+</label>
                                        <label><input type="checkbox" value="2500" onchange="libApplyFilters()"> 2500+</label>
                                        <label><input type="checkbox" value="3000" onchange="libApplyFilters()"> 3000+</label>
                                        <label><input type="checkbox" value="4000" onchange="libApplyFilters()"> 4000+</label>
                                    </div>
                                </div>
                            </div-->

                            <!-- Clear filters button -->
                            <button class="clear-filters-btn" onclick="libClearFilters()">Сбросить фильтры</button>
                        </div>
                    </div>
                    <div class="download-cards" id="download-cards">
                        <!-- Cards will be loaded dynamically -->
                    </div>
                </div>
            </div>
        </div>
        <div id="maps" class="page list">
                <div class="download-container">
                    <div class="lib-header">
                        <h1 data-translate="maps">Maps</h1>
                        <div class="header-actions">
                            <div class="tooltip-container">
                                <button id="map-filters" class="icon-action-button filters" title="Filters" onclick="libShowMapFilters()">
                                    <svg viewBox="0 0 24 24" width="14" height="14">
                                        <path d="M3 4h18l-7 8v8l-4-2v-6z" fill="none" stroke="currentColor" stroke-width="2"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="lib-down">
                        <div class="lib-filters" id="map-lib-filters">
                            <div class="lib-filters-header">
                                <h3 data-translate="filters">Filters</h3>
                                <button class="collapse-filters" onclick="libShowMapFilters()">×</button>
                            </div>
                            
                            <div class="lib-filters-content">
                                <!-- Search box -->
                                <div class="filter-group">
                                    <input type="text" id="map-lib-search" class="lib-search" placeholder="Search..." oninput="applyMapFilters()">
                                </div>

                                <!-- Basic filters -->
                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label data-translate="main_params">Main Parameters</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="mainform">
                                            <div class="form-element">
                                                <label data-translate="author">Author</label>
                                                <select id="map-lib-author-filter" onchange="applyMapFilters()" title="Filter maps by author">
                                                    <option value="">All authors</option>
                                                    <option value="@eenot">ЕЕнот</option>
                                                    <option value="@jalhund">Jalhund</option>
                                                    <option value="@bluepum">Bluepum</option>
                                                    <option value="@zachary.bachary">Zachary</option>
                                                </select>
                                            </div>
                                            <div class="form-element">
                                                <label data-translate="type">Type</label>
                                                <select id="map-lib-type-filter" onchange="applyMapFilters()" title="Filter maps by type">
                                                    <option value="">All types</option>
                                                    <option value="world">World</option>
                                                    <option value="continent">Continent</option>
                                                    <option value="region">Region</option>
                                                    <option value="country">Country</option>
                                                    <option value="oblast">Oblast</option>
                                                    <option value="district">Disctrict</option>
                                                    <option value="city">City</option>
                                                    <option value="custom">Custom</option>
                                                </select>
                                            </div>
                                            <div class="form-element">
                                                <label data-translate="load">Load</label>
                                                <select id="map-lib-load-filter" onchange="applyMapFilters()" title="Filter maps by load">
                                                    <option value="">All loads</option>
                                                    <option value="ultralight">Ultra Light</option>
                                                    <option value="mobile">Mobile</option>
                                                    <option value="normal">Normal</option>
                                                    <option value="heavy">Heavy</option>
                                                    <option value="superheavy">Super Heavy</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Regions filter -->
                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label data-translate="regions">Regions</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="world" name="regions" onchange="applyMapFilters()"> World</label>
                                            <label><input type="checkbox" value="europe" name="regions" onchange="applyMapFilters()"> Europe</label>
                                            <label><input type="checkbox" value="north_africa" name="regions" onchange="applyMapFilters()"> North Africa</label>
                                            <label><input type="checkbox" value="middle_east" name="regions" onchange="applyMapFilters()"> Middle East</label>
                                            <label><input type="checkbox" value="asia" name="regions" onchange="applyMapFilters()"> Asia</label>
                                            <label><input type="checkbox" value="americas" name="regions" onchange="applyMapFilters()"> Americas</label>
                                            <label><input type="checkbox" value="africa" name="regions" onchange="applyMapFilters()"> Africa</label>
                                            <label><input type="checkbox" value="oceania" name="regions" onchange="applyMapFilters()"> Oceania</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Features filter -->
                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label data-translate="features">Features</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="water_provinces" name="features" onchange="applyMapFilters()"> Water Provinces</label>
                                            <label><input type="checkbox" value="islands" name="features" onchange="applyMapFilters()"> Islands</label>
                                            <label><input type="checkbox" value="straits" name="features" onchange="applyMapFilters()"> Straits</label>
                                            <label><input type="checkbox" value="rivers" name="features" onchange="applyMapFilters()"> Rivers</label>
                                            <label><input type="checkbox" value="terrain" name="features" onchange="applyMapFilters()"> Terrain</label>
                                            <label><input type="checkbox" value="resources" name="features" onchange="applyMapFilters()"> Resources</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Provinces filter -->
                                <div class="filter-group">
                                    <div class="filter-group-header" onclick="libToggleFilterGroup(this)">
                                        <label data-translate="provinces">Provinces</label>
                                        <button class="collapse-filter-group" type="button">▼</button>
                                    </div>
                                    <div class="filter-group-content collapsed">
                                        <div class="checkbox-list">
                                            <label><input type="checkbox" value="0" name="provinces" onchange="applyMapFilters()"> 100-</label>
                                            <label><input type="checkbox" value="100" name="provinces" onchange="applyMapFilters()"> 100+</label>
                                            <label><input type="checkbox" value="500" name="provinces" onchange="applyMapFilters()"> 500+</label>
                                            <label><input type="checkbox" value="1000" name="provinces" onchange="applyMapFilters()"> 1000+</label>
                                            <label><input type="checkbox" value="2000" name="provinces" onchange="applyMapFilters()"> 2000+</label>
                                            <label><input type="checkbox" value="3000" name="provinces" onchange="applyMapFilters()"> 3000+</label>
                                            <label><input type="checkbox" value="4000" name="provinces" onchange="applyMapFilters()"> 4000+</label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Clear filters button -->
                                <button class="clear-filters-btn" onclick="clearMapFilters()" data-translate="reset_filters">Reset filters</button>
                            </div>
                        </div>
                        <div id="map-cards" class="download-cards">
                            <!-- Cards will be loaded dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        <div id="country-info" class="page info">
            <div class="list-info-container">
                <div class="info-header">
                    <h2><span id="country-name-header"></span></h2>
                    <div class="info-actions">
                        <button id="country-reforms" class="action-button" data-tooltip-key="reforms_tooltip" title="Refotms">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
                                <path d="M2 17l10 5 10-5"></path>
                                <path d="M2 12l10 5 10-5"></path>
                            </svg>
                        </button>
                        <button id="copy-country" class="action-button" data-tooltip-key="copy_tooltip" title="Duplicate">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                        </button>
                        <button id="delete-country" class="action-button" data-tooltip-key="delete_tooltip"  title="Delete">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"></path>
                                <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                        </button>
                    </div>
                </div>
                <form id="country-form" class="country-form">
                    <div class="form-group">
                        <label for="country-name" data-translate="name">Название</label>
                        <input type="text" id="country-name" name="name" class="main-page-input">
                    </div>
                    <div class="form-group">
                        <label for="country-color" data-translate="color">Цвет</label>
                        <div class="color-inputs">
                            <input type="number" id="country-color-r" name="color_r" min="0" max="255" step="0.001" class="color-input main-page-input" data-translate="color_r" title="R">
                            <input type="number" id="country-color-g" name="color_g" min="0" max="255" step="0.001" class="color-input main-page-input" data-translate="color_g" title="G">
                            <input type="number" id="country-color-b" name="color_b" min="0" max="255" step="0.001" class="color-input main-page-input" data-translate="color_b" title="B">
                            <button type="button" id="random-country-color" class="action-button" data-translate="random_color" title="Random Color">R</button>
                            <div class="color-preview" id="country-color-preview"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="country-capital" data-translate="capital_name">Название столицы</label>
                        <input type="text" id="country-capital" name="capital_name" class="main-page-input">
                    </div>
                    <div class="form-group">
                        <label for="country-capital-id" data-translate="capital_id">ID столицы</label>
                        <input type="number" id="country-capital-id" name="capital" class="main-page-input" min="0">
                    </div>
                    <div class="form-group">
                        <label for="country-defeated" data-translate="defeated">Побеждена</label>
                        <select id="country-defeated" name="defeated" class="main-page-input">
                            <option value="false" data-translate="no">Нет</option>
                            <option value="true" data-translate="yes">Да</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="country-political" data-translate="political_system">Политический строй</label>
                        <select id="country-political" name="political" class="main-page-input">
                            <option value="Democracy" data-translate="democracy">Демократия</option>
                            <option value="Monarchy" data-translate="monarchy">Монархия</option>
                            <option value="Communism" data-translate="communism">Коммунизм</option>
                            <option value="Fascism" data-translate="fascism">Фашизм</option>
                            <option value="Anarchy" data-translate="anarchy">Анархия</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-translate="allies">Союзники</label>
                        <div class="array-list" id="country-allies" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="allies" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="enemies">Враги</label>
                        <div class="array-list" id="country-enemies" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="enemies" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="independence_guarantees">Гарантии независимости</label>
                        <div class="array-list" id="country-guaranteed" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="guaranteed" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="guaranteed_by">Гарантии от</label>
                        <div class="array-list" id="country-guaranteed-by" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="guaranteed-by" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="pacts">Пакты</label>
                        <div class="array-list" id="country-pacts" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="pacts" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="sanctions">Санкции</label>
                        <div class="array-list" id="country-sanctions" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="sanctions" data-translate="add_country">Добавить страну</button>
                    </div>
                    <div class="form-group">
                        <label data-translate="vassals">Вассалы</label>
                        <div class="array-list" id="country-vassals" class="main-page-input"></div>
                        <button type="button" class="add-country-button main-page-input" data-target="vassals" data-translate="add_country">Добавить страну</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="downloadMapModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="download_map">Скачать карту</h3>
                </div>
                <div class="modal-body">
                    <p data-translate="do_u_want_download_map_for_this_scenario">Хотите скачать карту для этого сценария?</p>
                    <p id="mapNameText" style="font-weight: bold;"></p>
                </div>
                <div class="modal-footer">
                    <button class="modal-button secondary" onclick="closeDownloadMapModal()" data-translate="cancel">Отмена</button>
                    <button class="modal-button primary" onclick="confirmDownloadMap(); downloadedMaps.add(currentMapDownload.mapId)" data-translate="download">Скачать</button>
                </div>
            </div>
        </div>
        <div id="askModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="ask_delete">Запросить удаление</h3>
                </div>
                <div class="modal-body">
                    <p data-translate="if_u_want_to_delete_it_from_here_write_to_eenot">Если вы хотите, чтобы ваша карта/сценарий были удалены отсюда, напишите мне в личные сообщения Discord @enot_enot Telegram @eenot_eenot</p>
                </div>
                <div class="modal-footer">
                    <button class="modal-button secondary" onclick="closeAskDeleteModal()" data-translate="cancel">Отмена</button>
                    <a class="modal-button primary" href="https://discord.gg/ff8TPHH5VS">Disocrd</a>
                    <a class="modal-button primary" href="https://t.me/eenot_eenot">Telegram</a>
                </div>
            </div>
        </div>
        <div id="errorMapModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-translate="error_downloading_map">Ошибка загрузки карты</h3>
                </div>
                <div class="modal-body">
                    <p data-translate="not_filde_map_in_library">Не удалось найти карту в библиотеке EEditor'а.</p>
                    <p id="errorMapText" class="error-text"></p>
                    <p data-translate="try_ty_find_discord">Вы можете поискать карту в канале карт на официальном Discord сервере Warnament..</p>
                </div>
                <div class="modal-footer">
                    <button class="modal-button secondary" onclick="closeErrorMapModal()" data-translate="close">Закрыть</button>
                    <a href="https://discord.com/channels/1016359140832071751/1105050406746333244" target="_blank" rel="noopener noreferrer" class="modal-button primary" data-translate="open_discord">Открыть Discord</a>
                </div>
            </div>
        </div>
    </body>
</html>